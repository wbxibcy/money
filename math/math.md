**参数定义：**

- $n$：工件的总数
- $m$：机器的总数
- $n_i$：工件$i$包含的工序数量
- $M_{ij}$：工序$O_{ij}$的可用机器集合
- $v$：机器的速度等级集合
- $T_{ijkv}$：工序$O_{ij}$在机器$k$上以$v$速度加工的加工时间
- $E_{ijkv}$：工序$O_{ij}$在机器$k$上以$v$速度加工的功耗
- $P_{\text{idle},k}$：机器$k$处于空闲状态时的功耗
- $P_{\text{standby},k}$：机器$k$处于待机状态时的功耗

**变量定义：**

- $x_{ijkv}$：工序$O_{ij}$是否分配给机器$k$以$v$速度进行加工（二进制变量）
- $S_{ij}$：工序$O_{ij}$的开始时间
- $C_{ij}$：工序$O_{ij}$的完成时间
- $T_{\text{max}}$：最大完工时间
- $P_{\text{total}}$：总加工功耗
- $u_k$：机器$k$是否处于开机状态（二进制变量）

**目标函数：** 

最小化最大完工时间和总加工功耗，即： Minimize $T_{\text{max}} + P_{\text{total}}$



**约束条件：** 

每个工序必须分配给一个机器以确定的速率：

$\sum_{k=1}^{m}\sum_{v=1}^{m_k}x_{ijkv} = 1$ for all $i,j$

这个约束条件表示每个工序必须分配给一个机器以确定的速率。通过对所有机器$k$和速度$v$的组合进行求和，工序$O_{ij}$的分配变量$x_{ijkv}$的总和必须等于1。



每个机器在同一时间只能处理一个工件的一个工序：

$\sum_{i=1}^{n}\sum_{j=1}^{n_i}\sum_{v=1}^{m_k}x_{ijkv} \leq 1$ for all $k$

这个约束条件表示每个机器在同一时间只能处理一个工件的一个工序。通过对所有工件$i$、工序$j$和速度$v$的组合进行求和，工序$O_{ij}$的分配变量$x_{ijkv}$的总和必须小于等于1。



工序的开始时间和完成时间的计算：

$S_{ij} = \max\{C_{i'j'} + T_{i'j'kv}\}$ where $(i',j')$ is the preceding operation of $O_{ij}$
$C_{ij} = S_{ij} + T_{ijkv}$ where $(i',j')$ is the preceding operation of $O_{ij}$

这个约束条件表示工序的开始时间和完成时间的计算。工序$O_{ij}$的开始时间$S_{ij}$是其前一工序$O_{i'j'}$的完成时间$C_{i'j'}$加上从$O_{i'j'}$到$O_{ij}$的转换时间$T_{i'j'kv}$中的最大值。工序$O_{ij}$的完成时间$C_{ij}$是其开始时间$S_{ij}$加上自身的加工时间$T_{ijkv}$。



最大完工时间的定义：

$T_{\text{max}} \geq C_{ij}$ for all $i,j$

这个约束条件定义了最大完工时间$T_{\text{max}}$，它必须大于等于所有工序$O_{ij}$的完成时间$C_{ij}$。



总加工功耗的计算：

$P_{\text{total}} = \sum_{i=1}^{n}\sum_{j=1}^{n_i}\sum_{k=1}^{m}\sum_{v=1}^{m_k} x_{ijkv}E_{ijkv} + (1 - x_{ijkv})(P_{\text{idle},k}u_k + P_{\text{standby},k}(1 - u_k))$

总加工功耗$P_{\text{total}}$。它由以下两部分组成：

1. 分配工序的功耗：对于所有已分配的工序$(i, j, k, v)$，将其分配变量$x_{ijkv}$乘以对应的功耗$E_{ijkv}$，并将所有项求和。这部分表示所有已分配工序的加工功耗。
2. 闲置和待机功耗：对于所有未分配的工序$(i, j, k, v)$，即$x_{ijkv}=0$的情况，将其乘以对应机器$k$的闲置功耗$P_{\text{idle}, k}$，并乘以开关机状态变量$u_k$，再加上乘以对应机器$k$的待机功耗$P_{\text{standby}, k}$，再乘以$(1-u_k)$。将所有项求和。这部分表示未分配工序的闲置和待机功耗。



开关机状态变量约束：

$u_k = \begin{cases} 1, & \text{如果机器$k$至少分配了一个工序} \\ 0, & \text{如果机器$k$没有分配任何工序} \end{cases}$

这个约束条件定义了机器的开关机状态变量$u_k$。如果机器$k$至少分配了一个工序，则$u_k$等于1，表示机器$k$处于开机状态。如果机器$k$没有分配任何工序，则$u_k$等于0，表示机器$k$处于关机状态。